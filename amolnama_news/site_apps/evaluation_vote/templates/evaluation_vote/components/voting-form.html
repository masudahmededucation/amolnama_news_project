{% comment %}
Main voting form component with all selection steps
Displays the multi-step voting flow: Division → District → Constituency → Party
{% endcomment %}

<!-- Breadcrumb Navigation -->
<div class="breadcrumb" id="breadcrumb">
  <span class="current">Division / বিভাগ</span>
</div>

<!-- Division Selection View -->
<div id="division-view">
  <h3>Select Your Division (আপনার বিভাগ নির্বাচন করুন)</h3>
  <ul class="selection-list">
    {% for division in divisions %}
      <li onclick="selectDivision({{ division.division_id }}, '{{ division.division_name_en }}', '{{ division.division_name_bn }}')">
        <span class="name-en">{{ division.division_name_en }}</span>
        <span class="name-bn">({{ division.division_name_bn }})</span>
      </li>
    {% empty %}
      <li>No divisions found / কোনো বিভাগ পাওয়া যায়নি</li>
    {% endfor %}
  </ul>
</div>

<!-- District Selection View (hidden initially) -->
<div id="district-view" style="display: none;">
  <button class="back-btn" onclick="goBackToDivisions()">← Back / পিছনে</button>
  <h3>Select Your District (আপনার জেলা নির্বাচন করুন)</h3>
  <ul class="selection-list" id="district-list"></ul>
</div>

<!-- Constituency Selection View (hidden initially) -->
<div id="constituency-view" style="display: none;">
  <button class="back-btn" onclick="goBackToDistricts()">← Back / পিছনে</button>
  <h3>Select Your Constituency (আপনার নির্বাচনী এলাকা নির্বাচন করুন)</h3>
  <ul class="selection-list" id="constituency-list"></ul>
</div>

<!-- Party Selection View (hidden initially) -->
<div id="party-view" style="display: none;">
  <button class="back-btn" onclick="goBackToConstituencies()">← Back / পিছনে</button>
  <h3>Select Party (দল নির্বাচন করুন)</h3>
  <ul class="selection-list party-list" id="party-list-selection">
    {% for party in parties %}
      <li onclick="selectParty({{ party.party_id }}, '{{ party.party_name_en }}', '{{ party.party_name_bn }}', event)">
        <div class="party-item">
          <img 
            src="/media/{{ party.file_path }}{{ party.file_name }}"
            alt="{{ party.party_short_name_bn }}"
            class="party-logo"
          />
          <div class="party-text">
            <div class="party-info">
              <span class="party-short">{{ party.party_short_name_bn }}</span>
              <span class="party-separator">-</span>
              <span class="party-name">{{ party.party_name_bn }}</span>
            </div>
            <div class="party-details">
              <span class="party-alliance">জোট দল</span>
              <span class="party-symbol">{{ party.party_symbol_name_bn }}</span>
            </div>
            {% if party.vote_percentage %}
              <div class="bar-container">
                <div class="bar-fill" style="width: {{ party.vote_percentage }}%;"></div>
                <span class="pct-text">{{ party.vote_percentage|floatformat:1 }}%</span>
              </div>
            {% endif %}
          </div>
        </div>
      </li>
    {% empty %}
      <li>No parties found / কোনো দল পাওয়া যায়নি</li>
    {% endfor %}
  </ul>
</div>
