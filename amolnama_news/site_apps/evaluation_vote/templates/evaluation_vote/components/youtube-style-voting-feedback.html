{% comment %}
Voting feedback and results component
Displays after a vote is cast, including:
- Success message
- Vote summary
- Party results with progress bars
- Optional additional info collection form
- Start new vote button
{% endcomment %}

<!-- Success View (shown after vote) -->
<div id="success-view" style="display: none;">
  <div class="success-card">
    <!-- Success message with tick icon -->
    <p class="success-message" style="text-align: center; font-size: 1.2em; margin: 10px 0;">
      <span style="color: #0a0; font-size: 2em; font-weight: bold; vertical-align: middle;">тЬФ</span>
      <span style="margin-left: 10px;">ржЖржкржирж╛рж░ ржнрзЛржЯ ржЧрзНрж░рж╣ржг ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ</span>
    </p>

    <!-- Vote summary: Division, District, Constituency, Party -->
    <p class="vote-summary-info">
      ржмрж┐ржнрж╛ржЧ: {{ division_name }}, ржЬрзЗрж▓рж╛: {{ district_name }}, ржирж┐рж░рзНржмрж╛ржЪржирзА ржПрж▓рж╛ржХрж╛: {{ constituency_name }}, ржжрж▓: {{ party_name }}
    </p>

    <!-- Total vote count display component -->
    {% include "evaluation_vote/components/youtube-style-total-vote-info.html" %}

    <!-- Party results list with progress bars and vote counts -->
    <ul class="selection-list party-list" id="party-list-success">
      <!-- Filled dynamically by JavaScript after voting -->
    </ul>

    <!-- Optional Additional Information Card -->
    <div class="optional-card">
      <h4>ЁЯМЯ ржЖрж░ржУ рждржерзНржп ржжрж┐ржпрж╝рзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзБржи (Optional)</h4>

      <!-- Voting reason textarea -->
      <div class="form-group">
        <label for="vote-reason" id="reason-label">ржПржЗ ржжрж▓ржЯрж┐ржХрзЗ ржмрзЗржЫрзЗ ржирзЗржУржпрж╝рж╛рж░ ржорзВрж▓ ржХрж╛рж░ржг ржХрзА?</label>
        <textarea 
          id="vote-reason" 
          class="form-textarea" 
          maxlength="500" 
          rows="3"
          placeholder="ржЖржкржирж╛рж░ ржорждрж╛ржоржд рж▓рж┐ржЦрзБржи..."
        ></textarea>
        <div class="char-count"><span id="char-count">0</span>/500</div>
      </div>

      <!-- Location selection note -->
      <p class="optional-note">рж╕рзБржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржлрж▓рж╛ржлрж▓ ржкрзЗрждрзЗ ржЖржкржирж╛рж░ ржЗржЙржирж┐ржпрж╝ржи ржмрж╛ ржПрж▓рж╛ржХрж╛ржЯрж┐ ржмрзЗржЫрзЗ ржирж┐ржи</p>

      <!-- Upazila selection -->
      <div class="form-group">
        <label for="upazila">ржЙржкржЬрзЗрж▓рж╛ / Upazila</label>
        <select id="upazila" class="form-select" onchange="loadUnions()">
          <option value="">-- ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи / Select --</option>
        </select>
      </div>

      <!-- Union Parishad selection -->
      <div class="form-group">
        <label for="union">ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж / Union Parishad</label>
        <select id="union" class="form-select" disabled>
          <option value="">-- ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи / Select --</option>
        </select>
      </div>

      <!-- Submit additional info button -->
      <button class="update-btn" onclick="updateVote()">рждржерзНржп ржЖржкржбрзЗржЯ ржХрж░рзБржи / Update Info</button>

      <!-- Success message for info update -->
      <div class="update-success" id="update-success">
        <span class="tick-icon">тЬУ</span>
        <span>рждржерзНржп ржЖржкржбрзЗржЯ рж╣ржпрж╝рзЗржЫрзЗ! / Info Updated!</span>
      </div>
    </div>

    <!-- Button to cast another vote -->
    <button class="new-vote-btn" onclick="startNewVote()">ржирждрзБржи ржнрзЛржЯ ржжрж┐ржи / Cast Another Vote</button>
  </div>
</div>
